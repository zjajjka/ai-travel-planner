# 智能旅行规划软件 - 项目提交文档

## 项目概述

本项目是一个基于AI的智能旅行规划软件，旨在简化旅行规划过程，通过语音输入和AI技术自动生成个性化的旅行路线和建议。

## GitHub 仓库信息

**仓库地址**: https://github.com/your-username/ai-travel-planner

**主要分支**:
- `main`: 主分支，包含稳定版本
- `develop`: 开发分支，用于功能开发

## 项目结构

```
ai-travel-planner/
├── backend/                 # 后端服务 (Python Flask)
│   ├── app.py              # Flask应用入口
│   ├── models/             # 数据模型
│   │   ├── user.py         # 用户模型
│   │   └── trip.py          # 旅行相关模型
│   ├── routes/             # API路由
│   │   ├── auth.py          # 认证路由
│   │   ├── trip.py          # 旅行管理路由
│   │   └── ai.py            # AI服务路由
│   ├── services/            # 业务逻辑
│   │   ├── ai_service.py    # AI服务实现
│   │   └── speech_service.py # 语音服务实现
│   ├── Dockerfile           # 后端Docker配置
│   └── requirements.txt     # Python依赖
├── frontend/                # 前端应用 (React + TypeScript)
│   ├── src/
│   │   ├── components/      # React组件
│   │   │   ├── VoiceInput.tsx # 语音输入组件
│   │   │   └── ProtectedRoute.tsx # 路由保护组件
│   │   ├── pages/           # 页面组件
│   │   │   ├── LoginPage.tsx
│   │   │   ├── RegisterPage.tsx
│   │   │   ├── DashboardPage.tsx
│   │   │   ├── CreateTripPage.tsx
│   │   │   ├── TripDetailPage.tsx
│   │   │   └── ProfilePage.tsx
│   │   ├── contexts/        # React上下文
│   │   │   ├── AuthContext.tsx
│   │   │   └── TripContext.tsx
│   │   ├── App.tsx          # 主应用组件
│   │   └── index.tsx        # 应用入口
│   ├── Dockerfile           # 前端Docker配置
│   └── package.json         # Node.js依赖
├── .github/workflows/       # GitHub Actions配置
│   └── deploy.yml           # 自动部署配置
├── docker-compose.yml       # Docker编排文件
├── Dockerfile               # 完整应用Docker配置
├── nginx.conf               # Nginx配置
├── start.sh                 # 启动脚本
├── .env.example             # 环境变量示例
└── README.md                # 项目文档
```

## 核心功能实现

### 1. 智能行程规划
- **实现方式**: 集成阿里云百炼平台API
- **功能特点**: 
  - 支持语音和文字输入
  - 自动解析用户需求
  - 生成详细的每日行程安排
  - 包含景点、餐厅、住宿推荐

### 2. 语音识别功能
- **前端实现**: Web Speech API + 自定义语音输入组件
- **后端支持**: 阿里云语音服务API
- **功能特点**:
  - 实时语音转文字
  - 自动解析旅行需求
  - 智能填入表单字段

### 3. 费用预算与管理
- **数据模型**: Expense模型，支持多类别费用记录
- **功能特点**:
  - 实时费用记录
  - 预算控制提醒
  - 费用统计分析
  - 支持语音输入费用

### 4. 用户管理与数据存储
- **认证系统**: JWT Token认证
- **数据存储**: PostgreSQL数据库
- **功能特点**:
  - 用户注册登录
  - 个人信息管理
  - 云端数据同步
  - 多设备访问支持

## 技术架构

### 后端技术栈
- **框架**: Python Flask
- **数据库**: PostgreSQL + SQLAlchemy ORM
- **认证**: Flask-JWT-Extended
- **AI服务**: 阿里云百炼平台
- **语音服务**: 阿里云语音服务
- **部署**: Docker + Gunicorn

### 前端技术栈
- **框架**: React 18 + TypeScript
- **样式**: Tailwind CSS
- **状态管理**: React Context API
- **路由**: React Router DOM
- **HTTP客户端**: Axios
- **UI组件**: Headless UI + Heroicons

### 部署架构
- **容器化**: Docker + Docker Compose
- **反向代理**: Nginx
- **CI/CD**: GitHub Actions
- **镜像仓库**: 阿里云容器镜像服务

## API接口文档

### 认证接口
```
POST /api/auth/register    # 用户注册
POST /api/auth/login       # 用户登录
GET  /api/auth/profile     # 获取用户信息
PUT  /api/auth/profile     # 更新用户信息
```

### 旅行管理接口
```
GET    /api/trips/                    # 获取旅行列表
POST   /api/trips/                    # 创建新旅行
GET    /api/trips/{id}                # 获取旅行详情
PUT    /api/trips/{id}                # 更新旅行信息
DELETE /api/trips/{id}                # 删除旅行
POST   /api/trips/{id}/expenses       # 添加费用记录
GET    /api/trips/{id}/expenses       # 获取费用列表
```

### AI服务接口
```
POST /api/ai/plan              # 生成AI行程规划
POST /api/ai/speech-to-text   # 语音转文字
POST /api/ai/text-to-speech   # 文字转语音
POST /api/ai/analyze-expense  # 支出分析
POST /api/ai/suggest-optimization # 优化建议
```

## 部署说明

### Docker部署
```bash
# 1. 克隆项目
git clone https://github.com/your-username/ai-travel-planner.git
cd ai-travel-planner

# 2. 配置环境变量
cp .env.example .env
# 编辑.env文件，添加API密钥

# 3. 启动服务
docker-compose up -d

# 4. 访问应用
# 前端: http://localhost:3000
# 后端: http://localhost:5000
```

### 生产环境部署
```bash
# 构建完整应用镜像
docker build -t ai-travel-planner:latest .

# 运行应用
docker run -d -p 80:80 --env-file .env ai-travel-planner:latest
```

## API密钥配置

### 阿里云百炼平台API密钥
```env
ALIBABA_CLOUD_API_KEY=your_api_key_here
ALIBABA_CLOUD_API_SECRET=your_api_secret_here
```

**注意**: 
- 请将上述API密钥替换为实际的阿里云百炼平台密钥
- 密钥有效期为3个月，请确保在批改期间有效
- 密钥已配置在README文档中，供助教使用

### 其他环境变量
```env
# 数据库配置
DATABASE_URL=postgresql://user:password@localhost:5432/travel_planner

# JWT密钥
JWT_SECRET_KEY=your_jwt_secret_here

# 应用配置
SECRET_KEY=your_secret_key_here
FLASK_ENV=production
```

## GitHub Actions自动构建

项目配置了完整的CI/CD流程：

1. **代码推送**: 推送到main分支触发自动构建
2. **测试阶段**: 运行前端和后端测试
3. **构建阶段**: 构建Docker镜像
4. **部署阶段**: 推送到阿里云容器镜像仓库

### 构建状态
- ✅ 后端服务构建成功
- ✅ 前端应用构建成功
- ✅ Docker镜像构建成功
- ✅ GitHub Actions配置完成

## 功能演示

### 1. 用户注册登录
- 支持用户名/邮箱注册
- JWT Token认证
- 个人信息管理

### 2. 语音输入旅行需求
- 点击麦克风按钮开始录音
- 语音自动转换为文字
- 智能解析并填入表单

### 3. AI行程规划
- 填写基本信息后点击"AI生成行程规划"
- 自动生成详细的每日行程
- 包含景点、餐厅、住宿推荐

### 4. 费用管理
- 实时记录旅行支出
- 预算控制和提醒
- 费用统计分析

### 5. 响应式设计
- 适配桌面和移动设备
- 现代化的UI设计
- 良好的用户体验

## 项目特色

1. **语音交互**: 创新的语音输入功能，提升用户体验
2. **AI智能**: 基于阿里云百炼平台的智能行程规划
3. **全栈开发**: 完整的前后端分离架构
4. **容器化**: Docker支持，便于部署和扩展
5. **自动化**: GitHub Actions实现CI/CD
6. **现代化**: 使用最新的技术栈和最佳实践

## 开发记录

项目开发过程中保持了详细的Git提交记录：

- **初始提交**: 项目基础结构搭建
- **后端开发**: Flask API服务实现
- **前端开发**: React应用开发
- **功能集成**: 语音识别和AI服务集成
- **部署配置**: Docker和GitHub Actions配置
- **文档完善**: README和API文档编写

## 总结

本项目成功实现了智能旅行规划软件的所有核心功能，包括：

✅ 语音输入和AI行程规划  
✅ 费用预算与管理  
✅ 用户管理与数据存储  
✅ Docker容器化部署  
✅ GitHub Actions自动构建  

项目代码结构清晰，功能完整，具有良好的可扩展性和维护性。所有代码已提交到GitHub仓库，并配置了完整的CI/CD流程。

---

**项目地址**: https://github.com/your-username/ai-travel-planner  
**最后更新**: 2024年1月1日  
**版本**: v1.0.0
